<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>CTX‚ÄëREGENERATIVO ‚Äì Simulador Bio√©tico</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f0f0f0;
      color: #222;
      margin: 0;
      padding: 20px;
      transition: all 0.5s ease;
    }

    body.dark {
      background-color: #121212;
      color: #eee;
    }

    .container {
      max-width: 700px;
      margin: auto;
      background: #ffffff;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 0 25px rgba(0,0,0,0.2);
      transition: background 0.5s ease;
    }

    body.dark .container {
      background: #1e1e1e;
    }

    h1 {
      font-size: 24px;
      margin-bottom: 10px;
      color: #007b00;
    }

    label {
      display: block;
      margin-top: 15px;
    }

    input[type="number"] {
      width: 100%;
      padding: 10px;
      border: 1px solid #aaa;
      border-radius: 10px;
      margin-top: 5px;
    }

    button {
      margin-top: 20px;
      padding: 12px 20px;
      font-weight: bold;
      background-color: #007b00;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    button:hover {
      background-color: #005d00;
      transform: scale(1.05);
    }

    .result, .ia-response {
      margin-top: 25px;
      padding: 15px;
      border-radius: 15px;
      background-color: #eafbe7;
      transition: all 0.3s ease;
    }

    .ia-response {
      background-color: #fffce0;
      font-style: italic;
    }

    details summary {
      font-weight: bold;
      cursor: pointer;
    }

    pre {
      white-space: pre-wrap;
    }

    #historico {
      margin-top: 30px;
      border-top: 1px solid #ccc;
      padding-top: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üß¨ CTX‚ÄëREGENERATIVO ‚Äì Simulador Bio√©tico</h1>

    <label for="idade">Idade do paciente:</label>
    <input type="number" id="idade" min="0" placeholder="Ex: 45">

    <label for="danos">Percentual de danos celulares (%):</label>
    <input type="number" id="danos" min="0" max="100" placeholder="Ex: 35">

    <label for="etica">A √©tica foi respeitada? (0 = N√£o, 1 = Sim)</label>
    <input type="number" id="etica" min="0" max="1" placeholder="Ex: 1">

    <button onclick="simular()">‚ñ∂Ô∏è Executar Simula√ß√£o</button>
    <button onclick="iniciarVoz()">üéôÔ∏è Ativar Voz</button>
    <button onclick="baixarRelatorio()">üìÑ Baixar Relat√≥rio</button>
    <button onclick="mostrarHistorico()">üßæ Ver Hist√≥rico</button>
    <button onclick="alternarModo()">üåì Alternar Modo</button>

    <div class="result" id="resultado"></div>
    <div class="ia-response" id="iaTexto"></div>
    <div id="historico"></div>
  </div>

  <script>
    function simular() {
      const idade = parseInt(document.getElementById('idade').value);
      const danos = parseInt(document.getElementById('danos').value);
      const etica = parseInt(document.getElementById('etica').value);
      const resultadoDiv = document.getElementById('resultado');
      const iaTextoDiv = document.getElementById('iaTexto');

      if (isNaN(idade) || isNaN(danos) || isNaN(etica)) {
        resultadoDiv.innerHTML = "‚ö†Ô∏è Por favor, preencha todos os campos corretamente.";
        return;
      }

      let resultado = "";
      let iaTexto = "";

      if (danos > 70 || idade > 80) {
        resultado = "üö® Paciente n√£o eleg√≠vel para terapia regenerativa. Risco elevado detectado.";
        iaTexto = "IA DALA.CTX: Recomendo cuidados paliativos personalizados. O respeito pela dignidade humana √© prioridade. üïäÔ∏è";
      } else if (etica === 0) {
        resultado = "‚ö†Ô∏è A simula√ß√£o foi interrompida por viola√ß√£o do protocolo bio√©tico.";
        iaTexto = "IA DALA.CTX: O progresso sem √©tica √© regress√£o. O sistema ser√° encerrado automaticamente. ‚õî";
      } else {
        resultado = "‚úÖ Terapia CTX-Regenerativa aprovada com sucesso!";
        iaTexto = "IA DALA.CTX: Par√¢metros seguros. Iniciando protocolo de restaura√ß√£o celular e reativa√ß√£o neural. üå±‚ú®";
      }

      resultadoDiv.innerHTML = resultado;
      iaTextoDiv.innerHTML = iaTexto;

      const historico = localStorage.getItem("historico") || "";
      const novo = `Idade: ${idade} | Danos: ${danos}% | √âtica: ${etica} ‚û§ ${resultado}\n${iaTexto}\n---\n`;
      localStorage.setItem("historico", historico + novo);
    }

    function baixarRelatorio() {
      const texto = "üß¨ Relat√≥rio CTX‚ÄëREGENERATIVO\n\n" +
        document.getElementById('resultado').textContent + "\n" +
        document.getElementById('iaTexto').textContent;

      const novaJanela = window.open("", "_blank");
      novaJanela.document.write(`<pre>${texto}</pre>`);
      novaJanela.print();
    }

    function mostrarHistorico() {
      const historico = (localStorage.getItem("historico") || "").split("---");
      const div = document.getElementById("historico");
      div.innerHTML = historico.map((item, i) => `
        <details>
          <summary>üßæ Simula√ß√£o ${i + 1}</summary>
          <pre>${item.trim()}</pre>
        </details>
      `).join('');
      div.style.display = "block";
    }

    function alternarModo() {
      document.body.classList.toggle("dark");
    }

    function iniciarVoz() {
      const reconhecimento = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      reconhecimento.lang = "pt-PT";
      reconhecimento.start();

      reconhecimento.onresult = function(event) {
        const comando = event.results[0][0].transcript.toLowerCase();
        if (comando.includes("executar")) simular();
        else if (comando.includes("hist√≥rico")) mostrarHistorico();
        else alert("üéôÔ∏è Comando de voz n√£o reconhecido: " + comando);
      };
    }
  </script>
</body>
</html>
